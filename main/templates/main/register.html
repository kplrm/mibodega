{% extends 'main/header.html' %}
{% load static %}

{% block content %}
<!-- We are gonna accept information from the users (POST)-->

<!-- BREADCRUMB -->
<div class="breacrumb-section">
    <div class="container" style="margin-top: 10px;">
        <div class="breadcrumb-text">
            <a href="/"><i class="material-icons" style="margin-top: 10px;">home</i><span>Inicio</span></a>
            <span> / Registro</span>
            
        </div>
    </div>
</div>
<!-- BREADCRUMB END -->

<!-- Register Section Begin -->
<div class="register-login-section spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 offset-lg-3">
                <div class="register-form">
                    <h2>Regístrese</h2>

                    <form method="POST">
                        {% csrf_token %}
                        {% load widget_tweaks %}
                        <h4>
                            ¿Qué tipo de cuenta requieres?
                        </h4><br>
                        <p>
                            <label>
                                <input class="with-gap" name="group1" type="radio" id="Cliente" onclick="change_account_type(this)" checked />
                                <span>Cliente</span>
                            </label>
                        </p>
                        <p>
                            <label>
                                <input class="with-gap" name="group1" type="radio" id="Bodega" onclick="change_account_type(this)" />
                                <span>Bodega</span>
                            </label>
                        </p>

                        {% for hidden_field in form.hidden_fields %}
                        {{ hidden_field }}
                        {% endfor %}

                        {% if form.non_field_errors %}
                            <div class="alert alert-danger" role="alert">
                                {% for error in form.non_field_errors %}
                                {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}

                        <!-- USER FORM -->
                        {% for field in form.visible_fields %}
                            <div class="form-group">
                                {{ field.label_tag }}

                                {% if form.is_bound %}
                                {% if field.errors %}
                                    {% render_field field class="form-control is-invalid" %}
                                    {% for error in field.errors %}
                                    <div class="invalid-feedback">
                                        {{ error }}
                                    </div>
                                    {% endfor %}
                                {% else %}
                                    {% render_field field class="form-control is-valid" %}
                                {% endif %}
                                {% else %}
                                {% render_field field class="form-control" %}
                                {% endif %}

                                {% if field.help_text %}
                                <small class="form-text text-muted">{{ field.help_text }}</small>
                                {% endif %}
                            </div>
                        {% endfor %}
                        <!-- USER FORM -->
                        <!-- CLIENT FORM -->
                        {% for field in cl_form.visible_fields %}
                            <div class="form-group">
                                {{ field.label_tag }}

                                {% if cl_form.is_bound %}
                                {% if field.errors %}
                                    {% render_field field class="form-control is-invalid" %}
                                    {% for error in field.errors %}
                                    <div class="invalid-feedback">
                                        {{ error }}
                                    </div>
                                    {% endfor %}
                                {% else %}
                                    {% render_field field class="form-control is-valid" %}
                                {% endif %}
                                {% else %}
                                {% render_field field class="form-control" %}
                                {% endif %}

                                {% if field.help_text %}
                                <small class="form-text text-muted">{{ field.help_text }}</small>
                                {% endif %}
                            </div>
                        {% endfor %}
                        <!-- CLIENT FORM -->
                        <!-- BODEGA FORM -->
                        <div id="bodega_form_section">

                        </div>
                        <!-- BODEGA FORM -->
                        <button type="submit" class="site-btn register-btn">Registrar</button>
                    </form>
                    <div class="switch-login">
                        <a href="/login.html" class="or-login">o inicie sesión</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Register Form Section End -->

<script>
    function change_account_type(btn_cliente) {
        console.log(btn_cliente.id);
        if (btn_cliente.id == "Bodega") {
            var text_to_append = String('');
            {% for field in cl_form.visible_fields %}
                text_to_append += '<div class="form-group">'
                    +"{{ field.label_tag }}"
                    {% if cl_form.is_bound %}
                    {% if field.errors %}
                        +'{% render_field field class="form-control is-invalid" %}'
                        {% for error in field.errors %}
                        +'<div class="invalid-feedback">'
                            +"{{ error }}"
                        +'</div>'
                        {% endfor %}
                    {% else %}
                        +'{% render_field field class="form-control is-valid" %}'
                    {% endif %}
                    {% else %}
                        +'{% render_field field class="form-control" %}'
                    {% endif %}

                    {% if field.help_text %}
                        +'<small class="form-text text-muted">'+"{{ field.help_text }}"+'</small>'
                    {% endif %}
                </div>
            {% endfor %}
                
            
            $("#bodega_form_section").html('');
            $("#bodega_form_section").html(text_to_append);
        } else if (btn_cliente.id == "Cliente") {
            $("#bodega_form_section").html('');
        } else {
            ;
        }
    }
</script>
{% endblock %}